## R2R Application Documentation

### Introduction

R2R has support for uploading and ingesting files, search, RAG, as well as document management. Document management includes deletion based on filters and document updates. R2R also has advanced features, including hybrid search, reranking, advanced RAG techniques, multimodal RAG, knowledge graph RAG, and more.

R2R API specifications are included [here](/getting-started/r2r-api).

### Building an instance of R2R

An instance of R2R is general created using the `R2RAppBuilder` class, which leverages the builder pattern to assemble various components based on the provided configuration and overrides.

```python copy
from r2r import R2RConfig, R2RAppBuilder

config = R2RConfig.from_json("path/to/my_config.json") # defaults to `config.json` in R2R main
r2r_app = R2RAppBuilder(config).build()
```


### Serving R2R

R2R is designed such that every available function, e.g. `r2r_app.ingest_files(..)`, can be accessed via a RESTful API. The server can be launched with the `serve` method of your R2R instance, and the FastAPI application can be extracted for running via uuvicorn / gunicorn by calling `.app`.


```python copy
r2r_app.serve()
# alternatively, access app directly via r2r_app.app
```


In this example, the configuration is loaded from a `config.json` file. The `R2RAppBuilder` creates the necessary providers, pipes, and pipelines based on the configuration.

### Overriding Existing Endpoints

Existing endpoints can be modified by creating a custom application which overrides the existing endpoints.

```python copy
async def my_aingest_files(
    self,
    files: list[UploadFile],
    metadatas: Optional[list[dict]] = None,
    document_ids: Optional[list[uuid.UUID]] = None,
    user_ids: Optional[list[Optional[uuid.UUID]]] = None,
    versions: Optional[list[str]] = None,
    skip_document_info: bool = False,
    *args: Any,
    **kwargs: Any,
):
    # Implement your custom logic here
    # Ensure it adheres to the expected signature and functionality

r2r_app.aingest_files = my_aingest_files
```


### Adding Custom Endpoints

You can add custom endpoints to the R2R application by modifying the `R2RApp` class or by creating a custom FastAPI app instance.

Here's an example of how to add a custom endpoint:

```python copy
from fastapi import FastAPI
from r2r import R2RConfig, R2RAppBuilder

config = R2RConfig.from_json("path/to/config.json")
r2r_app = R2RAppBuilder(config).build()

app = r2r_app.app

@app.get("/custom_endpoint")
async def custom_endpoint():
    return {"message": "This is a custom endpoint"}
```

In this example, after creating the R2R application, a custom endpoint is added using the `@app.get("/custom_endpoint")` decorator. The `custom_endpoint` function defines the logic for handling requests to the `/custom_endpoint` route.